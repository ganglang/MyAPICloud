<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>星咖生活</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/common.css">
</head>

<body>

  <div class="foot-bar">
    <div class="barItem" onclick="toggleFrame(0)">
        <div class="bar_icon">

        </div>
        <div class="bar_font">首页</div>
    </div>

    <div class="barItem" onclick="toggleFrame(1)">
        <div class="bar_icon">

        </div>
        <div class="bar_font">分类</div>
    </div>

    <div class="barItem" onclick="toggleFrame(2)">
        <div class="bar_icon">

        </div>
        <div class="bar_font">升级VIP</div>
    </div>

    <div class="barItem" onclick="toggleFrame(3)">
        <div class="bar_icon">

        </div>
        <div class="bar_font">购物车</div>
    </div>

    <div class="barItem" onclick="toggleFrame(4)">
        <div class="bar_icon">

        </div>
        <div class="bar_font">我的</div>
    </div>
  </div>

</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
var uid;
var token;
apiready = function(){
  fnInital();
  uid=api.pageParam.uid||$api.getStorage('uid');
  token=api.pageParam.token||$api.getStorage('token');
};
var barItems;
var frames=['home','classify','vip','cart','personal'];
var footerBarH;
function fnInital(){
  var footerBar=$api.dom('.foot-bar');
  barItems=$api.domAll(footerBar,'.barItem');
  footerBarH=$api.offset(footerBar).h;
  toggleFrame(0);
}

function toggleFrame(n) {
  for(var i=0;i<barItems.length;i++){
    if(n==i){
      $api.addCls(barItems[i],'active');
      api.openFrame({
          name: frames[i],
          url: './'+frames[i]+'.html',
          rect: {
              x: 0,
              y: 0,
              w: 'auto',
              h: api.frameHeight-footerBarH
          },
          pageParam: {
              uid: uid,
              token:token
          },
          bounces: true,
          bgColor: 'rgba(0,0,0,0)',
          vScrollBarEnabled: false,
          hScrollBarEnabled: false
      });
    }else{
      $api.removeCls(barItems[i],'active');
      api.setFrameAttr({
          name: frames[i],
          hidden:true
      });
    }
  }


};

</script>
</html>
